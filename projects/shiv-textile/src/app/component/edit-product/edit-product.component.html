<app-progress *ngIf="dataLoading"></app-progress>

<section class="section">
    <div class="row">
        <div class="col-12">
            <div class="card recent-sales overflow-auto">
                <div class="card-body">
                    <h5 class="card-title">New Product
                        <a style="float: right;font-size: 14px;" routerLink="/admin/product">List Product </a>
                    </h5>
                    <form #myForm="ngForm" #formProductElement>
                        <div class="row">
                            <div class="col-lg-3 form-group">
                                <label class="form-label">Category <span class="text-danger">*</span></label>
                                <select class="form-select" #CategoryId="ngModel" [(ngModel)]="Product.CategoryId" name="CategoryId"
                                    [ngClass]="{'is-invalid':submitted && CategoryId.invalid}" required autofocus>
                                    <option value="">--Select Category--</option>
                                    <option [value]="model.CategoryId" *ngFor="let model of CategoryList">
                                        {{model.CategoryName}}</option>
                                </select>
                                <div *ngIf="CategoryId.invalid && (CategoryId.dirty || CategoryId.touched || submitted)"
                                    class="text-danger">
                                    <div *ngIf="CategoryId.errors?.['required']">
                                        Category is required.
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 form-group">
                                <label class="form-label">Unit <span class="text-danger">*</span></label>
                                <select class="form-select" #UnitId="ngModel" [(ngModel)]="Product.UnitId" name="UnitId"
                                    [ngClass]="{'is-invalid':submitted && UnitId.invalid}" required autofocus>
                                    <option value="">--Select Unit--</option>
                                    <option [value]="model.UnitId" *ngFor="let model of UnitList">
                                        {{model.UnitName}}</option>
                                </select>
                                <div *ngIf="UnitId.invalid && (UnitId.dirty || UnitId.touched || submitted)"
                                    class="text-danger">
                                    <div *ngIf="UnitId.errors?.['required']">
                                        Unit is required.
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="col-lg-3 form-group">
                                <label class="form-label">Size <span class="text-danger">*</span></label>
                                <select class="form-select" #SizeId="ngModel" [(ngModel)]="Product.SizeId" name="SizeId"
                                    [ngClass]="{'is-invalid':submitted && SizeId.invalid}" required autofocus>
                                    <option value="">--Select Size--</option>
                                    <option [value]="model.SizeId" *ngFor="let model of SizeList">
                                        {{model.SizeName}}</option>
                                </select>
                                <div *ngIf="SizeId.invalid && (SizeId.dirty || SizeId.touched || submitted)"
                                    class="text-danger">
                                    <div *ngIf="SizeId.errors?.['required']">
                                        Size is required.
                                    </div>
                                </div>
                            </div> --><div class="col-lg-3 form-group">
                                <label class="form-label">Company Name</label>
                                <input type="text" placeholder="Enter Company Name" #CompanyName="ngModel"
                                    [(ngModel)]="Product.CompanyName" name="CompanyName" class="form-control">
                            </div>
                            <div class="col-lg-3 form-group">
                                <label class="form-label">Status <span class="text-danger">*</span></label>
                                <select class="form-select" #Status="ngModel" [(ngModel)]="Product.Status" name="Status"
                                    [ngClass]="{'is-invalid':submitted && Status.invalid}" required autofocus>
                                    <option value="">--Select Status--</option>
                                    <option [value]="model.Key" *ngFor="let model of StatusList">
                                        {{model.Value}}</option>
                                </select>
                                <div *ngIf="Status.invalid && (Status.dirty || Status.touched || submitted)"
                                    class="text-danger">
                                    <div *ngIf="Status.errors?.['required']">
                                        Status is required.
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 form-group">
                                <label class="form-label">Product Name <span class="text-danger">*</span></label>
                                <input type="text" placeholder="Enter Product Name" #ProductName="ngModel"
                                    [(ngModel)]="Product.ProductName" name="ProductName" class="form-control"
                                    [ngClass]="{'is-invalid':submitted && ProductName.invalid}" required autofocus>
    
                                <div *ngIf="ProductName.invalid && (ProductName.dirty || ProductName.touched || submitted)"
                                    class="text-danger">
                                    <div *ngIf="ProductName.errors?.['required']">
                                        Product Name is required.
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 form-group">
                                <label class="form-label">Design No</label>
                                <input type="text" placeholder="Enter Design No" #DesignNo="ngModel"
                                    [(ngModel)]="Product.DesignNo" name="DesignNo" class="form-control">
                            </div>
                            <div class="col-lg-3 form-group">
                                <label class="form-label">Discount (%)</label>
                                <input type="number" placeholder="Enter Discount (%)" #DiscountPercentage="ngModel"
                                    [(ngModel)]="Product.DiscountPercentage" name="DiscountPercentage" class="form-control">
                            </div>
                            <div class="col-lg-3 form-group">
                                <label class="form-label">HSN Code <span class="text-danger">*</span></label>
                                <input type="text" placeholder="Enter HSN Code" #HSNCode="ngModel"
                                    [(ngModel)]="Product.HSNCode" name="HSNCode" class="form-control"
                                    [ngClass]="{'is-invalid':submitted && HSNCode.invalid}" required autofocus>
    
                                <div *ngIf="HSNCode.invalid && (HSNCode.dirty || HSNCode.touched || submitted)"
                                    class="text-danger">
                                    <div *ngIf="HSNCode.errors?.['required']">
                                        HSN Code is required.
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </form>
                </div>
                <div class="card-footer text-center">
                    <button type="button" class="btn btn-primary" (click)="saveProduct(myForm,false)" style="margin-right: 20px;">Sumbit</button>
                    <button type="button" class="btn btn-primary" (click)="saveProduct(myForm,true)" >Sumbit & Reset</button>
                </div>

            </div>
        </div>
    </div>
</section>

<section class="section" *ngIf="TempProductList.length > 0">
    <div class="row">
        <div class="col-12">
            <div class="card recent-sales overflow-auto">

                <div class="card-body">
                    <h5 class="card-title">Recently Added Products</h5>


                    <div class="row">
                        <!-- <div class="dataTable-top">
                            <div class="dataTable-search"><input
                                    class="dataTable-input form-control form-control-sm" [(ngModel)]="Search"
                                    placeholder="Search..." type="text"></div>

                        </div> -->
                        <div class="col-lg-12 table-responsive">
                            <table class="table table-bordered table-hover">
                                <thead>
                                    <tr>
                                    <th>#</th>
                                    <th style="cursor: pointer;" (click)="sort('ProductName')">Product Name</th>
                                    <th style="cursor: pointer;" (click)="sort('CategoryName')">Category Name</th>
                                    <th style="cursor: pointer;" (click)="sort('CompanyName')">Company</th>
                                    <th style="cursor: pointer;" (click)="sort('HSNCode')">HSN Code</th>
                                    <th style="cursor: pointer;" (click)="sort('DesignNo')">Design No</th>
                                    <th style="cursor: pointer;" (click)="sort('UnitName')">Unit</th>
                                    <th style="cursor: pointer;" (click)="sort('DiscountPercentage')">Discount</th>
                                    <th style="cursor: pointer;" (click)="sort('StatusName')">Status</th>
                                </tr>
                                </thead>
                                <tbody
                                    *ngFor="let model of TempProductList|filter:Search|orderBy:sortKey:reverse ; let i = index">
                                    <tr>
                                        <td>{{i+ 1}}</td>
                                        <td>{{model.ProductName}}</td>
                                        <td>{{model.CategoryName}}</td>
                                        <td>{{model.CompanyName}}</td>
                                        <td>{{model.HSNCode}}</td>
                                        <td>{{model.DesignNo}}</td>
                                        <td>{{model.UnitName}}</td>
                                        <td>{{model.DiscountPercentage}} %</td>
                                        <td><span
                                                [ngClass]="model.Status == 2 ?'badge bg-warning':'badge bg-success'">
                                                {{model.StatusName}}</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>

</section>
